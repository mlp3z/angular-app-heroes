
<div class="animate__animated animate__pulse  text-center">
    <h1 *ngIf="starting">
        <i class="fa fa-sync fa-spin"></i>
    </h1>
    <h1 *ngIf="!starting && heroe.id">
       <small> {{ heroe.name }} </small>
    </h1>
    <h1 *ngIf="!starting && !heroe.id">
        <small> Create a new Heroe </small>
     </h1>
</div>

<hr>

<div class="row text-center">
    <div class="col text-left">
        <button class="btn btn-secondary"
            routerLink="/heroes"
        >
            <i class="fa fa-arrow-left"></i>
            back
        </button>
    </div>
    <div class="col text-right" *ngIf="!starting && heroe.id">
        <button class="btn btn-primary"
            (click)=" clean() " 
        >
            <i class="fas fa-pen-nib"></i>
            new
        </button>
    </div>
</div>

<hr>

<div class="row animate__animated animate__fadeIn">
    <div class="col">

        <form (ngSubmit)="sendForm( f )" #f="ngForm" >

            <div class="form-group">
                <label> ID </label>
                <input type="text" class="form-control" disabled="disabled" placeholder="ID"
                    [(ngModel)]="heroe.id" name="id"
                >
                <small class="form-text text-muted">this value is autogenerated</small>
            </div>

            <div class="form-group">
                <label> Name * </label>
                <input type="text" class="form-control" placeholder="name" required
                    [(ngModel)]="heroe.name" name="name" #txtName="ngModel"
                    [class.is-invalid]="txtName.invalid && txtName.touched"
                >
                <small *ngIf="txtName.invalid && txtName.touched" 
                    class="form-text text-danger animated fadeIn">
                    name is required
                </small>
            </div>

            <div class="form-group">
                <label> Power </label>
                <input type="text" class="form-control" placeholder="power"
                    [(ngModel)]="heroe.power" name="power"
                >
            </div>

            <div class="form-group">

                <label> State </label>

                <!-- <input type="checkbox" class="form-control"
                    [(ngModel)]="heroe.state" name="state" #state="ngModel"
                >{{ state.valid }} -->

                <br>
                <button type="button" class="btn btn-outline-success w-100"
                    *ngIf="heroe.state" (click)="heroe.state = false"
                >
                    <i class="fa fa-smile-wink"></i> 
                    lives
                </button>
                <button type="button" class="btn btn-outline-danger w-100"
                    *ngIf="!heroe.state" (click)="heroe.state = true"
                >
                    <i class="fa fa-dizzy"></i> 
                    dead
                </button>
            </div>
            
            <hr>

            <div class="form-group text-center" *ngIf="!starting">

                <button class="btn btn-danger mr-3"
                    *ngIf="!starting && heroe.id"
                    (click)="deleteHeroe(heroe)" 
                >
                    <i *ngIf="!deleting" class="fas fa-trash"></i>
                    <i *ngIf="deleting" class="fas fa-sync fa-spin"></i>
                    {{ deleting ? 'deleting...' : 'delete' }}
                </button>

                <button type="submit" class="btn btn-primary w-75 " 
                    *ngIf="!loading " 
                    [disabled]=" !hasModifications() || !txtName.valid ? 'disabled' : null "
                    [ngClass]=" hasModifications() ? 'btn-primary' : 'btn-light'"
                >
                    <div *ngIf="heroe.id" >
                        <i class="far fa-edit"></i>
                        update
                    </div>
                    <div *ngIf="!heroe.id">
                        <i class="fa fa-save"></i>
                        create
                    </div>
                    <!-- {{ heroe.id ? 'update' : 'save' }} -->
                </button>

                <button type="button" class="btn btn-primary w-75" *ngIf="loading" disabled>
                    <i class="fa fa-sync fa-spin"></i>
                    {{ heroe.id ? 'updating...' : 'saving...' }}
                </button>

            </div>

        </form>
    </div>
</div>

<!-- 
<pre>
heroe:
{{ heroe | json}}
last:
{{ last | json}}
</pre>
 -->
